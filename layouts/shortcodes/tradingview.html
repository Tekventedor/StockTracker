{{ $type := .Get "type" }}
{{ $height := .Get "height" | default "400" }}
{{ $width := .Get "width" | default "100%" }}

{{ if eq $type "market-overview" }}
<div class="tradingview-widget-container" style="height: {{ $height }}px; width: {{ $width }};">
    <div class="tradingview-widget-container__widget" style="height: 100%;"></div>
    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-overview.js" async>
    {
        "tabs": [
            {
                "title": "Indices",
                "symbols": [
                    {"s": "FOREXCOM:SPXUSD", "d": "S&P 500"},
                    {"s": "FOREXCOM:NSXUSD", "d": "Nasdaq 100"},
                    {"s": "FOREXCOM:DJI", "d": "Dow 30"}
                ]
            }
        ],
        "colorTheme": "light",
        "dateRange": "12M",
        "showChart": true,
        "largeChartUrl": "",
        "isTransparent": false,
        "showSymbolLogo": true,
        "showFloatingTooltip": false,
        "width": "100%",
        "height": "100%",
        "plotLineColorFilling": "rgba(41, 98, 255, 0.1)",
        "plotLineColor": "rgba(41, 98, 255, 1)",
        "locale": "en"
    }
    </script>
</div>
{{ else if eq $type "market-quotes" }}
<div class="tradingview-widget-container" style="height: {{ $height }}px; width: {{ $width }};">
    <div class="tradingview-widget-container__widget" style="height: 100%;"></div>
    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-market-quotes.js" async>
    {
        "width": "100%",
        "height": "100%",
        "symbolsGroups": [
            {
                "name": "Indices",
                "originalName": "Indices",
                "symbols": [
                    {"name": "FOREXCOM:SPXUSD", "displayName": "S&P 500"},
                    {"name": "FOREXCOM:NSXUSD", "displayName": "Nasdaq 100"},
                    {"name": "FOREXCOM:DJI", "displayName": "Dow 30"}
                ]
            }
        ],
        "showSymbolLogo": true,
        "colorTheme": "light",
        "isTransparent": false,
        "locale": "en"
    }
    </script>
</div>
{{ end }} 