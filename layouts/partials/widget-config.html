{{ $config := dict
    "marketOverview" (dict
        "tabs" (slice (dict
            "title" "Indices"
            "symbols" (slice
                (dict "s" "FOREXCOM_SPXUSD" "d" "S&P 500")
                (dict "s" "FOREXCOM_NSXUSD" "d" "Nasdaq 100")
                (dict "s" "FOREXCOM_DJI" "d" "Dow 30")
            )
        ))
        "colorTheme" "light"
        "dateRange" "12M"
        "showChart" true
        "largeChartUrl" ""
        "isTransparent" false
        "showSymbolLogo" true
        "showFloatingTooltip" false
        "width" "100%"
        "height" "100%"
        "plotLineColorFilling" "rgba(41, 98, 255, 0.1)"
        "plotLineColor" "rgba(41, 98, 255, 1)"
        "locale" "en"
    )
    "marketQuotes" (dict
        "width" "100%"
        "height" "100%"
        "symbolsGroups" (slice (dict
            "name" "Indices"
            "originalName" "Indices"
            "symbols" (slice
                (dict "name" "FOREXCOM_SPXUSD" "displayName" "S&P 500")
                (dict "name" "FOREXCOM_NSXUSD" "displayName" "Nasdaq 100")
                (dict "name" "FOREXCOM_DJI" "displayName" "Dow 30")
            )
        ))
        "showSymbolLogo" true
        "colorTheme" "light"
        "isTransparent" false
        "locale" "en"
    )
}}

<script type="text/javascript">
    window.widgetConfigs = {
        marketOverview: {{ $config.marketOverview | jsonify | safeJS }},
        marketQuotes: {{ $config.marketQuotes | jsonify | safeJS }}
    };

    // Replace underscores with colons in symbol names
    document.addEventListener('DOMContentLoaded', function() {
        if (window.widgetConfigs) {
            // Fix market overview symbols
            window.widgetConfigs.marketOverview.tabs.forEach(tab => {
                tab.symbols.forEach(symbol => {
                    symbol.s = symbol.s.replace('_', ':');
                });
            });

            // Fix market quotes symbols
            window.widgetConfigs.marketQuotes.symbolsGroups.forEach(group => {
                group.symbols.forEach(symbol => {
                    symbol.name = symbol.name.replace('_', ':');
                });
            });
        }
    });
</script> 